{% extends 'base.html' %}
{% block head%}{% endblock %}

{% block body%}
<div class="tout">
    <div class="flecheConteneur">
        <div class="goback" onclick="redirection('/decklist')">
            <svg viewBox="0 0 110 160" fill="none">
                <line x1="105" y1="20" x2="35" y2="85" style="stroke: rgb(255, 255, 255); stroke-width: 10px" />
                <line x1="35" y1="85" x2="105" y2="150" style="stroke: rgb(255, 255, 255); stroke-width: 10px" />
            </svg>
        </div>
    </div>
    <p style="padding-left: 20px;padding-top: 0;padding-bottom: 0;">Retour</p>
    <div class="hero alt">
        <div class="texte">
            <h2>{{ deckInfo['name'] }}</h2>
            <p class="description">{{ deckInfo['description'] }}</p>
        </div>
        <div class="image imageDeck carre">
            {% if img_id != None %}
            <img class="cover2" src="../static/img/uploads/{{ img_id }}{{ extension }}" />
            {% endif %}
            <div class="assombreur asalt" onmouseover="assombrir()" onmouseleave="désassombrir()">
                <p class="centrer">Changer d'image</p>
                <form method="POST" action="{{ url_for('changeImg', deck_id=deckInfo['deck_id']) }}"
                    enctype="multipart/form-data">
                    <input type="file" class="changeImg" accept=".png,.jpg,.gif,.webp" name="image">
                    <input id="submit" type="submit" style="display: none;">
                </form>
            </div>
        </div>
    </div>
    <div class="deckBarre">
        <div class="boutons">
            <a class="bouton bouton1" onclick="redirection(` {{ deckInfo['deck_id'] }}/add` )">Ajouter des cartes</a>
            <a class="bouton boutonRouge" onclick="redirection(` {{ deckInfo['deck_id'] }}/delete` )">Supprimer le
                deck</a>
        </div>
        <!-- <div>
            <p>aaa</p>
        </div> -->
    </div>
    <div class="separateur nomargintop nomarginbot">
        <svg viewBox="0 0 100 30" fill="none">
            <line x1="15" y1="10" x2="85" y2="10" style="stroke: rgb(255, 255, 255); stroke-width: 10px ;"
                stroke-linecap="round" />
        </svg>
    </div>
    {% for card in cards %}
    <div class="cardEntry">
        <div class="flexCard">
            <h4 class="front">{{ card['front'] }}</h4>
            <div class="flexCard" style="column-gap: 1rem;">
                <p class="tag">{{ card['tag'] }}</p>
                <a class="batsu" style="height: 20px;width: 20px;"
                    href="{{ url_for('deleteCard',deck_id=deckInfo['deck_id'] ,card_id=card['card_id']) }}">
                    <svg viewBox="0 0 50 50" fill="none">
                        <line x1="0" y1="50" x2="50" y2="0" style="stroke: rgb(255, 255, 255); stroke-width: 5px ;"
                            stroke-linecap="round" />
                        <line x1="0" y1="0" x2="50" y2="50" style="stroke: rgb(255, 255, 255); stroke-width: 5px ;"
                            stroke-linecap="round" />
                    </svg>
                </a>
            </div>
        </div>
        <p class="front">{{ card['back'] }}</p>


    </div>
    {% endfor %}
</div>
<script>
    let submit = document.getElementById('submit')
    document.getElementsByClassName('changeImg')[0].addEventListener('change', function (e) {
        submit.click()
    });

    function désassombrir() {
        ass = document.getElementsByClassName("assombreur")[0].style;
        ass.animation = "fadeOut 0.2s";
        ass.animationFillMode = "forwards";
    };

    function assombrir() {
        let ass = document.getElementsByClassName('assombreur')[0].style;
        ass.animation = "fadeIn 0.2s";
        ass.animationFillMode = "forwards";

    };

    let element = document.getElementsByClassName("tout")[0];

    function redirection(lien) {
        element.style.animation = 'fadeOut 0.2s'
        setTimeout(() => {
            window.location.replace(lien);
        }, 200)
    };

    désassombrir()
</script>
{% endblock %}